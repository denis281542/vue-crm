{"remainingRequest":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\src\\store\\category.js","dependencies":[{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\src\\store\\category.js","mtime":1605929285830},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy9BZG1pbi9wc2QvdnVlLWNybS92dWUtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvQWRtaW4vcHNkL3Z1ZS1jcm0vdnVlLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZS9hcHAnOwpleHBvcnQgZGVmYXVsdCB7CiAgYWN0aW9uczogewogICAgZmV0Y2hDYXRlZ29yaWVzOiBmdW5jdGlvbiBmZXRjaENhdGVnb3JpZXMoX3JlZikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB1aWQsIGNhdGVnb3JpZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQsIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2dldFVpZCcpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB1aWQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIi91c2Vycy8iLmNvbmNhdCh1aWQsICIvY2F0ZWdvcmllcyIpKS5vbmNlKCd2YWx1ZScpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0LnNlbnQudmFsKCk7CgogICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQwKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSB7fTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBfY29udGV4dC50MDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIE9iamVjdC5rZXlzKGNhdGVnb3JpZXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNhdGVnb3JpZXNba2V5XSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGtleQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldEVycm9yJywgX2NvbnRleHQudDEpOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQudDE7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDE0XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjcmVhdGVDYXRlZ29yeTogZnVuY3Rpb24gY3JlYXRlQ2F0ZWdvcnkoX3JlZjIsIF9yZWYzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB0aXRsZSwgbGltaXQsIHVpZCwgY2F0ZWdvcnk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIHRpdGxlID0gX3JlZjMudGl0bGUsIGxpbWl0ID0gX3JlZjMubGltaXQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2dldFVpZCcpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICB1aWQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiL3VzZXJzLyIuY29uY2F0KHVpZCwgIi9jYXRlZ29yaWVzIikpLnB1c2goewogICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICAgIGxpbWl0OiBsaW1pdAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGNhdGVnb3J5ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICAgIGxpbWl0OiBsaW1pdCwKICAgICAgICAgICAgICAgICAgaWQ6IGNhdGVnb3J5LmtleQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEyOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRFcnJvcicsIF9jb250ZXh0Mi50MCk7CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDIudDA7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMiwgMTJdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwZGF0ZUNhdGVnb3J5OiBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShfcmVmNCwgX3JlZjUpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIHRpdGxlLCBsaW1pdCwgaWQsIHVpZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjQuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgdGl0bGUgPSBfcmVmNS50aXRsZSwgbGltaXQgPSBfcmVmNS5saW1pdCwgaWQgPSBfcmVmNS5pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZ2V0VWlkJyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHVpZCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCIvdXNlcnMvIi5jb25jYXQodWlkLCAiL2NhdGVnb3JpZXMiKSkuY2hpbGQoaWQpLnVwZGF0ZSh0aXRsZSwgbGltaXQpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRFcnJvcicsIF9jb250ZXh0My50MCk7CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDMudDA7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMiwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:/Users/Admin/psd/vue-crm/vue-app/src/store/category.js"],"names":["firebase","actions","fetchCategories","commit","dispatch","uid","database","ref","once","val","categories","Object","keys","map","key","id","createCategory","title","limit","push","category","updateCategory","child","update"],"mappings":";;;;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AAEA,eAAe;AACbC,EAAAA,OAAO,EAAE;AACDC,IAAAA,eADC,iCACmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAnBC,gBAAAA,MAAmB,QAAnBA,MAAmB,EAAXC,QAAW,QAAXA,QAAW;AAAA;AAAA;AAAA,uBAEpBA,QAAQ,CAAC,QAAD,CAFY;;AAAA;AAEhCC,gBAAAA,GAFgC;AAAA;AAAA,uBAGZL,QAAQ,CAACM,QAAT,GAAoBC,GAApB,kBAAkCF,GAAlC,kBAAoDG,IAApD,CAAyD,OAAzD,CAHY;;AAAA;AAAA,4CAGuDC,GAHvD;;AAAA;AAAA;AAAA;AAAA;;AAAA,8BAGgE,EAHhE;;AAAA;AAGhCC,gBAAAA,UAHgC;AAAA,iDAI/BC,MAAM,CAACC,IAAP,CAAYF,UAAZ,EAAwBG,GAAxB,CAA4B,UAAAC,GAAG;AAAA,yDAASJ,UAAU,CAACI,GAAD,CAAnB;AAA0BC,oBAAAA,EAAE,EAAED;AAA9B;AAAA,iBAA/B,CAJ+B;;AAAA;AAAA;AAAA;AAMtCX,gBAAAA,MAAM,CAAC,UAAD,cAAN;AANsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASzC,KAVM;AAWDa,IAAAA,cAXC,wCAWkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAnCb,gBAAAA,MAAmC,SAAnCA,MAAmC,EAA3BC,QAA2B,SAA3BA,QAA2B;AAAfa,gBAAAA,KAAe,SAAfA,KAAe,EAARC,KAAQ,SAARA,KAAQ;AAAA;AAAA;AAAA,uBAEnCd,QAAQ,CAAC,QAAD,CAF2B;;AAAA;AAE/CC,gBAAAA,GAF+C;AAAA;AAAA,uBAG9BL,QAAQ,CAACM,QAAT,GAAoBC,GAApB,kBAAkCF,GAAlC,kBAAoDc,IAApD,CAAyD;AAACF,kBAAAA,KAAK,EAALA,KAAD;AAAQC,kBAAAA,KAAK,EAALA;AAAR,iBAAzD,CAH8B;;AAAA;AAG/CE,gBAAAA,QAH+C;AAAA,kDAI9C;AAACH,kBAAAA,KAAK,EAALA,KAAD;AAAQC,kBAAAA,KAAK,EAALA,KAAR;AAAeH,kBAAAA,EAAE,EAAEK,QAAQ,CAACN;AAA5B,iBAJ8C;;AAAA;AAAA;AAAA;AAMrDX,gBAAAA,MAAM,CAAC,UAAD,eAAN;AANqD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASxD,KApBM;AAqBDkB,IAAAA,cArBC,wCAqBsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAvClB,gBAAAA,MAAuC,SAAvCA,MAAuC,EAA/BC,QAA+B,SAA/BA,QAA+B;AAAnBa,gBAAAA,KAAmB,SAAnBA,KAAmB,EAAZC,KAAY,SAAZA,KAAY,EAALH,EAAK,SAALA,EAAK;AAAA;AAAA;AAAA,uBAEvCX,QAAQ,CAAC,QAAD,CAF+B;;AAAA;AAEnDC,gBAAAA,GAFmD;AAAA;AAAA,uBAGnDL,QAAQ,CAACM,QAAT,GAAoBC,GAApB,kBAAkCF,GAAlC,kBAAoDiB,KAApD,CAA0DP,EAA1D,EAA8DQ,MAA9D,CAAqEN,KAArE,EAA4EC,KAA5E,CAHmD;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAKzDf,gBAAAA,MAAM,CAAC,UAAD,eAAN;AALyD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQ5D;AA7BM;AADI,CAAf","sourcesContent":["import firebase from 'firebase/app'\n\nexport default {\n  actions: {\n    async fetchCategories({commit, dispatch}) {\n      try {\n        const uid = await dispatch('getUid')\n        const categories = (await firebase.database().ref(`/users/${uid}/categories`).once('value')).val() || {}\n        return Object.keys(categories).map(key => ({...categories[key], id: key}))\n      } catch (e) {\n        commit('setError', e)\n        throw e\n      }\n    },\n    async createCategory({commit, dispatch}, {title, limit}) {\n      try {\n        const uid = await dispatch('getUid')\n        const category = await firebase.database().ref(`/users/${uid}/categories`).push({title, limit})\n        return {title, limit, id: category.key}\n      } catch (e) {\n        commit('setError', e)\n        throw e\n      }\n    },\n    async updateCategory({commit, dispatch}, {title, limit, id}) {\n      try {\n        const uid = await dispatch('getUid')\n        await firebase.database().ref(`/users/${uid}/categories`).child(id).update(title, limit)\n      } catch (e) {\n        commit('setError', e)\n        throw e\n      }\n    }\n  }\n}\n"]}]}