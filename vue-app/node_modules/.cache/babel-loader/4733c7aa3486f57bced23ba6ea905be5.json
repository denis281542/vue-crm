{"remainingRequest":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\src\\components\\CategoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\src\\components\\CategoryEdit.vue","mtime":1605929404893},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0FkbWluL3BzZC92dWUtY3JtL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyByZXF1aXJlZCwgbWluVmFsdWUgfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGNhdGVnb3JpZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0OiBudWxsLAogICAgICB0aXRsZTogJycsCiAgICAgIGxpbWl0OiAxMDAsCiAgICAgIGN1cnJlbnQ6IG51bGwKICAgIH07CiAgfSwKICB2YWxpZGF0aW9uczogewogICAgdGl0bGU6IHsKICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICB9LAogICAgbGltaXQ6IHsKICAgICAgbWluVmFsdWU6IG1pblZhbHVlKDEwMCkKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50OiBmdW5jdGlvbiBjdXJyZW50KGNhdElkKSB7CiAgICAgIHZhciBfdGhpcyRjYXRlZ29yaWVzJGZpbmQgPSB0aGlzLmNhdGVnb3JpZXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLmlkID09PSBjYXRJZDsKICAgICAgfSksCiAgICAgICAgICB0aXRsZSA9IF90aGlzJGNhdGVnb3JpZXMkZmluZC50aXRsZSwKICAgICAgICAgIGxpbWl0ID0gX3RoaXMkY2F0ZWdvcmllcyRmaW5kLmxpbWl0OwoKICAgICAgdGhpcy50aXRsZSA9IHRpdGxlOwogICAgICB0aGlzLmxpbWl0ID0gbGltaXQ7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzJGNhdGVnb3JpZXMkID0gdGhpcy5jYXRlZ29yaWVzWzBdLAogICAgICAgIGlkID0gX3RoaXMkY2F0ZWdvcmllcyQuaWQsCiAgICAgICAgdGl0bGUgPSBfdGhpcyRjYXRlZ29yaWVzJC50aXRsZSwKICAgICAgICBsaW1pdCA9IF90aGlzJGNhdGVnb3JpZXMkLmxpbWl0OwogICAgdGhpcy5jdXJyZW50ID0gaWQ7CiAgICB0aGlzLnRpdGxlID0gdGl0bGU7CiAgICB0aGlzLmxpbWl0ID0gbGltaXQ7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbiBzdWJtaXRIYW5kbGVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY2F0ZWdvcnlEYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMuJHYuJGludmFsaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLiR2LiR0b3VjaCgpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIGNhdGVnb3J5RGF0YSA9IHsKICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzLmN1cnJlbnQsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdGhpcy50aXRsZSwKICAgICAgICAgICAgICAgICAgbGltaXQ6IF90aGlzLmxpbWl0CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVDYXRlZ29yeScsIGNhdGVnb3J5RGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKCfQmtCw0YLQtdCz0L7RgNC40Y8g0L7QsdC90L7QstC70LXQvdCwJyk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxMF1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5zZWxlY3QgPSBNLkZvcm1TZWxlY3QuaW5pdCh0aGlzLiRyZWZzLnNlbGVjdCk7CiAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgaWYgKHRoaXMuc2VsZWN0ICYmIHRoaXMuc2VsZWN0LmRlc3Ryb3kpIHsKICAgICAgdGhpcy5zZWxlY3QuZGVzdHJveSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["CategoryEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA,SAAA,QAAA,EAAA,QAAA,QAAA,0BAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,GAHA;AAIA,MAAA,OAAA,EAAA;AAJA,KAAA;AAAA,GAPA;AAaA,EAAA,WAAA,EAAA;AACA,IAAA,KAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA,KADA;AAEA,IAAA,KAAA,EAAA;AAAA,MAAA,QAAA,EAAA,QAAA,CAAA,GAAA;AAAA;AAFA,GAbA;AAiBA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,KADA,EACA;AAAA,kCACA,KAAA,UAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,KAAA;AAAA,OAAA,CADA;AAAA,UACA,KADA,yBACA,KADA;AAAA,UACA,KADA,yBACA,KADA;;AAEA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACA;AALA,GAjBA;AAwBA,EAAA,OAxBA,qBAwBA;AAAA,4BACA,KAAA,UAAA,CAAA,CAAA,CADA;AAAA,QACA,EADA,qBACA,EADA;AAAA,QACA,KADA,qBACA,KADA;AAAA,QACA,KADA,qBACA,KADA;AAEA,SAAA,OAAA,GAAA,EAAA;AACA,SAAA,KAAA,GAAA,KAAA;AACA,SAAA,KAAA,GAAA,KAAA;AACA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAA,CAAA,EAAA,CAAA,QADA;AAAA;AAAA;AAAA;;AAEA,gBAAA,KAAA,CAAA,EAAA,CAAA,MAAA;;AAFA;;AAAA;AAAA;AAOA,gBAAA,YAPA,GAOA;AACA,kBAAA,EAAA,EAAA,KAAA,CAAA,OADA;AAEA,kBAAA,KAAA,EAAA,KAAA,CAAA,KAFA;AAGA,kBAAA,KAAA,EAAA,KAAA,CAAA;AAHA,iBAPA;AAAA;AAAA,uBAYA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,YAAA,CAZA;;AAAA;AAaA,gBAAA,KAAA,CAAA,QAAA,CAAA,qBAAA;;AAbA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAhBA,GA9BA;AAgDA,EAAA,OAhDA,qBAgDA;AACA,SAAA,MAAA,GAAA,CAAA,CAAA,UAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,MAAA,CAAA;AACA,IAAA,CAAA,CAAA,gBAAA;AACA,GAnDA;AAoDA,EAAA,SApDA,uBAoDA;AACA,QAAA,KAAA,MAAA,IAAA,KAAA,MAAA,CAAA,OAAA,EAAA;AACA,WAAA,MAAA,CAAA,OAAA;AACA;AACA;AAxDA,CAAA","sourcesContent":["<template>\n  <div class=\"col s12 m6\">\n    <div>\n      <div class=\"page-subtitle\">\n        <h4>Редактировать</h4>\n      </div>\n\n      <form @submit.prevent=\"submitHandler\">\n        <div class=\"input-field\" >\n          <select ref=\"select\" v-model=\"current\">\n            <option\n              v-for=\"c of categories\"\n              :key=\"c.id\"\n              :value=\"c.id\"\n            >\n              {{c.title}}\n            </option>\n          </select>\n          <label>Выберите категорию</label>\n        </div>\n\n        <div class=\"input-field\">\n          <input\n              id=\"name\"\n              type=\"text\"\n              v-model=\"title\"\n              :class=\"{invalid: $v.title.$dirty && !$v.title.required}\"\n          >\n          <label for=\"name\">Название</label>\n          <span \n            class=\"helper-text invalid\"\n            v-if=\"$v.title.$dirty && !$v.title.required\"\n\n          >\n            Введите название категории\n          </span>\n        </div>\n\n        <div class=\"input-field\">\n          <input\n              id=\"limit\"\n              type=\"number\"\n              v-model.number=\"limit\"\n              :class=\"{invalid: $v.limit.$dirty && !$v.limit.minValue}\"\n          >\n          <label for=\"limit\">Лимит</label>\n          <span \n            class=\"helper-text invalid\"\n            v-if=\"$v.limit.$dirty && !$v.limit.minValue\"\n          >\n            Минимальная значение {{$v.limit.$params.minValue.min}}\n          </span>\n        </div>\n\n        <button class=\"btn waves-effect waves-light\" type=\"submit\">\n          Обновить\n          <i class=\"material-icons right\">send</i>\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {required, minValue} from 'vuelidate/lib/validators'\n\nexport default {\n  props: {\n    categories: {\n      type: Array,\n      required: true\n    }\n  },\n  data: () => ({\n    select: null,\n    title: '',\n    limit: 100,\n    current: null\n  }),\n  validations: {\n    title: {required},\n    limit: {minValue: minValue(100)}\n  },\n  watch: {\n    current(catId) {\n      const {title, limit} = this.categories.find(c => c.id === catId)\n      this.title = title\n      this.limit = limit\n    }\n  },\n  created() {\n    const {id, title, limit} = this.categories[0]\n    this.current = id\n    this.title = title\n    this.limit = limit\n  },\n  methods: {\n    async submitHandler() {\n      if(this.$v.$invalid) {\n        this.$v.$touch()\n        return\n      }\n\n      try {\n        const categoryData = {\n          id: this.current,\n          title: this.title,\n          limit: this.limit\n        }\n        await this.$store.dispatch('updateCategory', categoryData)\n        this.$message('Категория обновлена')\n      } catch (e) {}\n    }\n  },\n  mounted() {\n    this.select = M.FormSelect.init(this.$refs.select)\n    M.updateTextFields()\n  },\n  destroyed() {\n    if (this.select && this.select.destroy) {\n      this.select.destroy()\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}