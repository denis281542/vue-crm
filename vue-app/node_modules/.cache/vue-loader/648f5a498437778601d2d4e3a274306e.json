{"remainingRequest":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\src\\components\\CategoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\src\\components\\CategoryEdit.vue","mtime":1605929938549},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\psd\\vue-crm\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cmVxdWlyZWQsIG1pblZhbHVlfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnCgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGNhdGVnb3JpZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgc2VsZWN0OiBudWxsLAogICAgdGl0bGU6ICcnLAogICAgbGltaXQ6IDEwMCwKICAgIGN1cnJlbnQ6IG51bGwKICB9KSwKICB2YWxpZGF0aW9uczogewogICAgdGl0bGU6IHtyZXF1aXJlZH0sCiAgICBsaW1pdDoge21pblZhbHVlOiBtaW5WYWx1ZSgxMDApfQogIH0sCiAgd2F0Y2g6IHsKICAgIGN1cnJlbnQoY2F0SWQpIHsKICAgICAgY29uc3Qge3RpdGxlLCBsaW1pdH0gPSB0aGlzLmNhdGVnb3JpZXMuZmluZChjID0+IGMuaWQgPT09IGNhdElkKQogICAgICB0aGlzLnRpdGxlID0gdGl0bGUKICAgICAgdGhpcy5saW1pdCA9IGxpbWl0CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc3Qge2lkLCB0aXRsZSwgbGltaXR9ID0gdGhpcy5jYXRlZ29yaWVzWzBdCiAgICB0aGlzLmN1cnJlbnQgPSBpZAogICAgdGhpcy50aXRsZSA9IHRpdGxlCiAgICB0aGlzLmxpbWl0ID0gbGltaXQKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHN1Ym1pdEhhbmRsZXIoKSB7CiAgICAgIGlmKHRoaXMuJHYuJGludmFsaWQpIHsKICAgICAgICB0aGlzLiR2LiR0b3VjaCgpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgY2F0ZWdvcnlEYXRhID0gewogICAgICAgICAgaWQ6IHRoaXMuY3VycmVudCwKICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgICAgbGltaXQ6IHRoaXMubGltaXQKICAgICAgICB9CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZUNhdGVnb3J5JywgY2F0ZWdvcnlEYXRhKQogICAgICAgIHRoaXMuJG1lc3NhZ2UoJ9Ca0LDRgtC10LPQvtGA0LjRjyDQvtCx0L3QvtCy0LvQtdC90LAnKQogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZWQnLCBjYXRlZ29yeURhdGEpCiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zZWxlY3QgPSBNLkZvcm1TZWxlY3QuaW5pdCh0aGlzLiRyZWZzLnNlbGVjdCkKICAgIE0udXBkYXRlVGV4dEZpZWxkcygpCiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICBpZiAodGhpcy5zZWxlY3QgJiYgdGhpcy5zZWxlY3QuZGVzdHJveSkgewogICAgICB0aGlzLnNlbGVjdC5kZXN0cm95KCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["CategoryEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CategoryEdit.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"col s12 m6\">\n    <div>\n      <div class=\"page-subtitle\">\n        <h4>Редактировать</h4>\n      </div>\n\n      <form @submit.prevent=\"submitHandler\">\n        <div class=\"input-field\" >\n          <select ref=\"select\" v-model=\"current\">\n            <option\n              v-for=\"c of categories\"\n              :key=\"c.id\"\n              :value=\"c.id\"\n            >\n              {{c.title}}\n            </option>\n          </select>\n          <label>Выберите категорию</label>\n        </div>\n\n        <div class=\"input-field\">\n          <input\n              id=\"name\"\n              type=\"text\"\n              v-model=\"title\"\n              :class=\"{invalid: $v.title.$dirty && !$v.title.required}\"\n          >\n          <label for=\"name\">Название</label>\n          <span \n            class=\"helper-text invalid\"\n            v-if=\"$v.title.$dirty && !$v.title.required\"\n\n          >\n            Введите название категории\n          </span>\n        </div>\n\n        <div class=\"input-field\">\n          <input\n              id=\"limit\"\n              type=\"number\"\n              v-model.number=\"limit\"\n              :class=\"{invalid: $v.limit.$dirty && !$v.limit.minValue}\"\n          >\n          <label for=\"limit\">Лимит</label>\n          <span \n            class=\"helper-text invalid\"\n            v-if=\"$v.limit.$dirty && !$v.limit.minValue\"\n          >\n            Минимальная значение {{$v.limit.$params.minValue.min}}\n          </span>\n        </div>\n\n        <button class=\"btn waves-effect waves-light\" type=\"submit\">\n          Обновить\n          <i class=\"material-icons right\">send</i>\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {required, minValue} from 'vuelidate/lib/validators'\n\nexport default {\n  props: {\n    categories: {\n      type: Array,\n      required: true\n    }\n  },\n  data: () => ({\n    select: null,\n    title: '',\n    limit: 100,\n    current: null\n  }),\n  validations: {\n    title: {required},\n    limit: {minValue: minValue(100)}\n  },\n  watch: {\n    current(catId) {\n      const {title, limit} = this.categories.find(c => c.id === catId)\n      this.title = title\n      this.limit = limit\n    }\n  },\n  created() {\n    const {id, title, limit} = this.categories[0]\n    this.current = id\n    this.title = title\n    this.limit = limit\n  },\n  methods: {\n    async submitHandler() {\n      if(this.$v.$invalid) {\n        this.$v.$touch()\n        return\n      }\n\n      try {\n        const categoryData = {\n          id: this.current,\n          title: this.title,\n          limit: this.limit\n        }\n        await this.$store.dispatch('updateCategory', categoryData)\n        this.$message('Категория обновлена')\n        this.$emit('updated', categoryData)\n      } catch (e) {}\n    }\n  },\n  mounted() {\n    this.select = M.FormSelect.init(this.$refs.select)\n    M.updateTextFields()\n  },\n  destroyed() {\n    if (this.select && this.select.destroy) {\n      this.select.destroy()\n    }\n  }\n}\n</script>\n"]}]}